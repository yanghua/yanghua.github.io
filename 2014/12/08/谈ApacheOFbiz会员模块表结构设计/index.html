<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="google-site-verification" content="6q22x_DFglYGJjD5t1d95nBYd_U8cDU04B-Haky8KHs" />
  <meta name="baidu-site-verification" content="yEdVDDBr1C" />
  
  <title>谈ApacheOFbiz会员模块表结构设计 | yanghua</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="数据库表的结构设计可谓是ofbiz除技术框架之外，另一个非常值得学习的方向。这篇文章我们来谈谈ofbiz对电子商务会员表的设计。">
<meta property="og:type" content="article">
<meta property="og:title" content="谈ApacheOFbiz会员模块表结构设计">
<meta property="og:url" content="http://vinoyang.com/2014/12/08/谈ApacheOFbiz会员模块表结构设计/index.html">
<meta property="og:site_name" content="yanghua">
<meta property="og:description" content="数据库表的结构设计可谓是ofbiz除技术框架之外，另一个非常值得学习的方向。这篇文章我们来谈谈ofbiz对电子商务会员表的设计。">
<meta property="og:image" content="http://img.blog.csdn.net/20141207174552619?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207174811218?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207175035906?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207175114109?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207175340870?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207175514002?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207175623906?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207180227605?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207180336759?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207181714343?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207181909875?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207182136500?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207182233409?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207182334578?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207182425386?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207182725051?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207194421708?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207195149054?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207195241656?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207195653769?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207195744064?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207195931985?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207200343832?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207200627125?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20141207200856281?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:updated_time" content="2015-11-27T05:26:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="谈ApacheOFbiz会员模块表结构设计">
<meta name="twitter:description" content="数据库表的结构设计可谓是ofbiz除技术框架之外，另一个非常值得学习的方向。这篇文章我们来谈谈ofbiz对电子商务会员表的设计。">
<meta name="twitter:image" content="http://img.blog.csdn.net/20141207174552619?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
  
    <link rel="alternative" href="/atom.xml" title="yanghua" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"> -->
  <link rel="stylesheet" href="/css/style.css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">yanghua</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">alone coder</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/projects">Projects</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-github-link" class="nav-icon" href="https://github.com/yanghua" target="_blank" title="GitHub"></a>
        
        
          <a id="nav-weibo-link" class="nav-icon" href="http://weibo.com/yanghua1127" target="_blank" title="Sina Weibo"></a>
        
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://vinoyang.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-谈ApacheOFbiz会员模块表结构设计" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/08/谈ApacheOFbiz会员模块表结构设计/" class="article-date">
  <time datetime="2014-12-07T20:04:00.000Z" itemprop="datePublished">2014-12-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      谈ApacheOFbiz会员模块表结构设计
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <div><br><br>数据库表的结构设计可谓是ofbiz除技术框架之外，另一个非常值得学习的方向。这篇文章我们来谈谈ofbiz对电子商务会员表的设计。<br><br><a id="more"></a><br><br># PARTY<br><br>ofbiz对人、团体进行了抽象，称之为party，翻译为中文称之为“会员”（但我觉得抛开领域，如果你也有相关的设计需求，在其他领域可能称之为团体更合适）。会员在ofbiz被设计为一个抽象的概念（对应到面向对象设计中，你可以称其为一个基类），它有两个具体的延伸（继承者）：分别是PERSON以及PARTY_GROUP。数据库的E-R图：<br><br><img src="http://img.blog.csdn.net/20141207174552619?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br><br>这里PERSON，PARTY_GROUP分别表示“个人会员”、“组织会员”。Party只是一种抽象，它定义了可以被抽象为“会员”的对象所具有的基本特征。但 “个人”以及“组织”会员却具备比 “基本会员”更多的特征，所以此处从Party延伸出两张表来存储这些额外的特征信息它们的主键都是PARTY表的PARTY_ID。<br><br># PARTY_TYPE<br><br>partyType定义了party的类型约束。E-R图如下：<br><br><img src="http://img.blog.csdn.net/20141207174811218?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br><br>可以看到，PARTY_TYPE是拥有层级关系的（它的一个属性PARENT_TYPE_ID自关联了PARTY_TYPE的主键：PARTY_TYPE_ID，下面如果看到E-R图上有自关联到本身的，都表示这种关系，不再敖述）。<br><br>ofbiz提供的初始数据中有如下几种party type：<br><br><img src="http://img.blog.csdn.net/20141207175035906?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br><br>构建成层级关系如下图所示：<br><br><img src="http://img.blog.csdn.net/20141207175114109?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br><br>上面展示的两张表：PERSON、PARTY_GROUP也是其中的两个partyType，并且这些partyType都可以独立扩展的，PERSON、PARTY_GROUP也是仅有的两个扩展。这也是上面表结构中这两个记录的HAS_TABLE值为Y的原因。<br><br># PARTY_ROLE<br><br>就跟社会的“角色分工”一样，一个会员在系统中也必定会拥有属于自己的角色。而PARTY_ROLE表就是用于关联会员与角色类型的关系表，很明显会员与角色类型是多对多的关系（这里需要提及的是：ofbiz中只有角色类型，没有角色，或者更准确点说，角色类型包含了角色）。<br><br><img src="http://img.blog.csdn.net/20141207175340870?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br><br># PARTY_RELATIONSHIP<br><br>上面我们看到的会员是一类“抽象”的实体。不管它表示的是个人，还是组织，它总是会跟其他会员发生关系，就好像一个人不可能脱离社会而孤立得存在着，他必然有自己的社会角色，并跟社会的其他“团体”产生联系。这在ofbiz中被抽象为“partyRelationship”。我们来看它是如果表达“关系”这个语义的：<br><br><img src="http://img.blog.csdn.net/20141207175514002?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br><br>当你把这些所有的字段连起来，它几乎能涵盖所有的“会员关系”（要知道，有时会员关系会非常复杂，一个会员有时会存在于多个系统中）。<br><br>我们再回过头来，看PARTY_RELATIONSHIP的表结构设计：<br><br><img src="http://img.blog.csdn.net/20141207175623906?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br><br>可以看到前五个键形成了联合主键，其中前四个都是形如XXX_FROM，XXX_TO的ID标识。表示从“FROM”方往“TO”方建立关系。其中PARTY_ID_FROM与ROLE_TYPE_ID_FROM是“源”方；PARTY_ID_TO与ROLE_TYPE_ID_TO是“目标”方。<br><br>从上面图中也可以看到，每个关系都带有两个DATETIME字段，分别表示：开始日期，截止日期。这说明关系是有“时段”这个属性的。当然，如果没有截止日期，可以看做是“永久”的。因此为了防止关系过了生效时段无法再次建立关系（因为主键不允许重复），所以选择了联合“FROM_DATE”作为联合主键（后面如果再次建立相同的关系时，只要FROM_DATE不一样，就视为一条新记录）。<br><br>这里有必要说明一下，在ofbiz的数据库设计中，大量采用了“时段”这个属性来标识记录的有效性。这样的设计与逻辑删除相比的好处是：它除了减少了删除时因为外键约束等连带关系导致的错误，还可以直接充当“历史记录”的作用，省去了对历史表的维护，当然它的缺点就是：表中的记录会比其他的设计多得多。<br><br>当然，From跟To只是为了标识两者建立了关系，却并未说明它们到底存在怎样的关系，就好像——我跟你是朋友。这句话可以拆分为三部分：FROM方：我，TO方：你，关系是：朋友。上表中用一个字段表示了关系：PARTY_RELATIONSHIP_TYPE_ID（这只是一个外键，关联着表PARTY_RELATIONSHIP_TYPE）。<br><br>在界面上新建一个关系（此处是从外部到自己的一个关系）：<br><br><img src="http://img.blog.csdn.net/20141207180227605?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br><br># PARTY_RELATIONSHIP_TYPE<br><br>该表约束了关系的类型。比如：雇佣者、朋友、父、子、管理者，E-R图：<br><br><img src="http://img.blog.csdn.net/20141207180336759?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br><br>从图中可以看出，会员关系类型也拥有层次关系。表中还有两个特别的字段：<br><br><em>   ROLE_TYPE_ID_VALID_FROM
</em>   ROLE_TYPE_ID_VALID_TO<div>它们用于约束这个关系的建立双方的角色。也就是说，不是任意的两个角色之间一定可以建立起某个特定的会员关系。当然这两个字段通常都为空，表示不对此加以限制。<br></div><div>对每个关系类型，都可以扩展以独立实现关系（被扩展后关系类型记录的字段HAS_TABLE被标识为Y，否则默认为N），在ofbiz的初始化数据中，唯一被扩展的关系类型是：EMPLOYMENT。我们来看看EMPLOYMENT关系表的实现：<br></div><div><img src="http://img.blog.csdn.net/20141207181714343?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div><div>可以看到，它跟之前的PARTY_RELATIONSHIP的主键实现方式一样。因此可以把它看做是：PARTY_RELATIONSHIP_TYPE_ID为EMPLOYMENT的PARTY_RELATIONSHIP的特殊实现。<br></div><div>在界面上建立一个关系类型：<br></div><div><img src="http://img.blog.csdn.net/20141207181909875?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div>

<h1 id="PARTY-CLASSIFICATION-TYPE"><a href="#PARTY-CLASSIFICATION-TYPE" class="headerlink" title="PARTY_CLASSIFICATION_TYPE"></a>PARTY_CLASSIFICATION_TYPE</h1><div>为了便于管理，ofbiz对会员按各种维度进行分类，常见的分类的类型有：年收入、价值等级、产业、雇员数量等；<br></div>

<h1 id="PARTY-CLASSIFICATION-GROUP"><a href="#PARTY-CLASSIFICATION-GROUP" class="headerlink" title="PARTY_CLASSIFICATION_GROUP"></a>PARTY_CLASSIFICATION_GROUP</h1><div>会员并不会直接跟分类的类型产生关系，而是跟一个或多个分类组产生关联关系。而分类组受分类类型约束。<br></div><div>新建一个分类组：<br></div><div><img src="http://img.blog.csdn.net/20141207182136500?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div>

<h1 id="PARTY-CLASSIFICATION"><a href="#PARTY-CLASSIFICATION" class="headerlink" title="PARTY_CLASSIFICATION"></a>PARTY_CLASSIFICATION</h1><div>会员的分类相关表的关系图：<br></div><div><img src="http://img.blog.csdn.net/20141207182233409?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div><div>从表的关联关系可以看出，会员分类跟分类组是多对多的关系，并且分类具有时效性。因此联合FROM_DATE作外键。<br></div><div>将会员划归入一个会员分类：<br></div><div><img src="http://img.blog.csdn.net/20141207182334578?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div>

<h1 id="CONTENT-MECH"><a href="#CONTENT-MECH" class="headerlink" title="CONTENT_MECH"></a>CONTENT_MECH</h1><div>从这张表开始，我们来看会员的联系方式相关的表结构设计，这也是一部分非常棒的设计。</div><div><img src="http://img.blog.csdn.net/20141207182425386?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div><div>这张表存储了联系方式基本信息。它引用了另一张表：CONTENT_MECH_TYPE作为外键，来表示该联系方式的类型（通常的联系方式类型有电话、邮箱、网址等）。<br></div>

<h1 id="CONTENT-MECH-TYPE"><a href="#CONTENT-MECH-TYPE" class="headerlink" title="CONTENT_MECH_TYPE"></a>CONTENT_MECH_TYPE</h1><div><img src="http://img.blog.csdn.net/20141207182725051?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div><div>可以看到联系方式类型，也是具有层级结构（父子关系）的。<br></div><div>当我们想新建一个联系方式时，首先必须先指定想创建的联系方式的类型：<br></div><div><img src="http://img.blog.csdn.net/20141207194421708?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div>

<h1 id="PARTY-CONTACT-MECH"><a href="#PARTY-CONTACT-MECH" class="headerlink" title="PARTY_CONTACT_MECH"></a>PARTY_CONTACT_MECH</h1><div>毫无疑问，地址信息只有跟会员联系起来，才能表示会员的地址。而会员跟地址是多对多的关系，理解这个关系时需要注意的是会员可以是任何团体、组织或者个人。那这里可能就会存在两个不同的会员拥有同一个联系方式的可能，比如：一个员工会员与一个该员工所属的公司会员，它们可以都存在同一个联系方式：公司的通讯地址。当然一个会员拥有多个联系方式，这是很容易理解的。所以会员标识跟联系方式标识之间是多对多的关系，并且跟前面的设计模式相似——联系方式也有时效性，比如换电话号码，换工作导致联系方式变化等，所以联合FROM_DATE作为联合主键：<br></div><div><img src="http://img.blog.csdn.net/20141207195149054?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div><div>当我们选择联系方式类型为电话号码时，会出现如下的表单填写：<br></div><div><img src="http://img.blog.csdn.net/20141207195241656?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div><div>如果你新建一个联系方式的类型为电话号码，那么电话号码存储在何处？此处又跟前面谈到的HAS_TABLE字段有关(CONTACT_MECH_TYPE中也存在这个字段)。正常情况下，联系方式关联着联系方式类型，普通的联系方式的具体信息存储在CONTACT_MECH的INFO_STRING属性中。但有些联系信息不是单纯的像邮箱这样只是一个字符串，比如像电话号码、邮政编码…它们都有具体的格式表示。所以这些特例用INFO_STRING这一个属性存储也不方便，因此可以独立扩展该CONTACT_MECH_TYPE(将其HAS_TABLE字段设置为Y，这样查询该CONTACT_MECH信息的时候，就不采用INFO_STRING字段，而是采用扩展表中格式化的联系方式)。<br></div>

<h1 id="CONTACT-MECH-PURPOSE-TYPE"><a href="#CONTACT-MECH-PURPOSE-TYPE" class="headerlink" title="CONTACT_MECH_PURPOSE_TYPE"></a>CONTACT_MECH_PURPOSE_TYPE</h1><div>当我们点击上面界面的保存按钮之后，会更进一步得扩充联系信息：<br></div><div><img src="http://img.blog.csdn.net/20141207195653769?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div><div>在ofbiz中还存在一个称之为“联系目的”的东西，它是什么意思？<br></div><div><img src="http://img.blog.csdn.net/20141207195744064?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div><div>看到选项我们就会明白，说白了一个人的地址簿或者电话簿中的联系方式可能有很多。它们没有主次之分，只有目的不同。<br></div>

<h1 id="PARTY-CONTACT-MECH-PURPOSE"><a href="#PARTY-CONTACT-MECH-PURPOSE" class="headerlink" title="PARTY_CONTACT_MECH_PURPOSE"></a>PARTY_CONTACT_MECH_PURPOSE</h1><div>上面谈到了联系目的，那么很自然它需要跟会员具体的某条联系信息关联起来才能称之为：某个会员为了某种联系目的存储了一个“联系方式”记录。<br></div><div><img src="http://img.blog.csdn.net/20141207195931985?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div><div>这里需要注意的是，它并没有跟PARTY_CONTACT_MECH产生直接关联（没有外键关系），而是把PARTY_CONTACT_MECH的三个主键照搬过来，联合CONTACT_MECH_PURPOSE_TYPE_ID形成四个组合主键，这是因为PARTY_CONTACT_MECH的联合主键机制无法被其他表当做外键引用。因此，可以将PARTY_CONTACT_MECH_PURPOSE看作联系信息模块的聚合。这个怎么来理解？其实一个地址可以看成：某个会员（PARTY_ID），出于某种目的（CONTACT_MECH_PURPOSE_TYPE_ID）,在某段时间内（FROM_DATE），保存了某个联系方式（CONTACT_MECH_ID）。这种联系方式的设计非常有弹性，因此在大部分情况下，这种抽象性能够涵盖大部分应用场景。<br></div>

<h1 id="CONTENT-TYPE"><a href="#CONTENT-TYPE" class="headerlink" title="CONTENT_TYPE"></a>CONTENT_TYPE</h1><div>会员内容的设计跟联系方式类似。会员可以有一个类似文件空间在服务器上，可以供其保存文档、图片之类的东西。CONTENT_TYPE限定了会员可以存储的内容类型：<br></div><div><img src="http://img.blog.csdn.net/20141207200343832?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div>

<h1 id="CONTENT"><a href="#CONTENT" class="headerlink" title="CONTENT"></a>CONTENT</h1><div>该表是它的具体存储内容的地方，当然并不是唯一的，如果CONTENT_TYPE有一条记录的HAS_TABLE值为Y，则那个记录对应的表也用于存储内容。内容表里的字段非常多，就不截图了。<br></div><div>跟之前的联系信息类似，会员可以有多个内容，一个内容也可能从属于多个会员。因为会员是个抽象的概念，对应到实体上可能会有重合，所以需要一个“目的”来修饰会员内容，它就是——PARTY_CONTENT_TYPE。<br></div>

<h1 id="PARTY-CONTENT-TYPE"><a href="#PARTY-CONTENT-TYPE" class="headerlink" title="PARTY_CONTENT_TYPE"></a>PARTY_CONTENT_TYPE</h1><div>用于修饰会员内容的用途，当然这里它的表名叫type，事实上从数据记录来看，来时充当了目的的作用。<br></div><div><img src="http://img.blog.csdn.net/20141207200627125?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div><div>内容还跟其他一些表有关联（主要是被引用关系，比如：CONTENT_ROLE等），此处因为跟本文主题没太大关系，所以不再敖述。<br></div>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><h2 id="更高的抽象级别"><a href="#更高的抽象级别" class="headerlink" title="更高的抽象级别"></a>更高的抽象级别</h2><div>ofbiz party模块的设计，正如它所应用的场景：非常适用于电子商务系统会员信息相关的设计。当然ofbiz中其他相关的多个系统也同样应用了这些表结构，这也意味着它有适用于一般行业、系统的通用性，这得益于这种设计的抽象级别比较高。它可以描述任何的组织、个体、他们的地址信息、他们之间的关系。特别是对会员“relationship”表的设计非常类似于《分析模式》中谈到的责任模式：<br></div><div><img src="http://img.blog.csdn.net/20141207200856281?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWFuZ2h1YV9rb2Jl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br></div><div>因此，如果你面临组织结构比较复杂的业务场景时，比如群组、联系人、个人、公司都可以成为系统的用户，又或者一个非常大的跨国公司，拥有：总部、区域销售办公室、办事处、分公司等各种组织形式时，这种设计就会派上用场。<br></div>

<h2 id="数据库表的继承关系"><a href="#数据库表的继承关系" class="headerlink" title="数据库表的继承关系"></a>数据库表的继承关系</h2><div>从PARTY、PARTY_TYPE、PARTY_GROUP、PERSON这几张表我们可以学习到数据库表的“继承”设计。<br></div>

<h2 id="时效性设计"><a href="#时效性设计" class="headerlink" title="时效性设计"></a>时效性设计</h2><div>不是真删除、也不是逻辑删除、而是失效（FROM_DATE, THUR_DATE）。这种方式可以代替“操作-操作历史”的多表设计，转而合并为独立的一张表。<br></div>

<pre><code>&lt;div  style=&quot;padding-top:20px&quot;&gt;         
</code></pre><p>版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
<pre><code>&lt;/div&gt;
</code></pre><p></p></div><p></p>
<!-- Baidu Button BEGIN -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://vinoyang.com/2014/12/08/谈ApacheOFbiz会员模块表结构设计/" data-id="cixiqxlo1006s2qvu3mixupj7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/01/27/health4j—Java项目的全面体检工具/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          health4j—Java项目的全面体检工具
        
      </div>
    </a>
  
  
    <a href="/2014/10/31/pipeline-filter模式变体之尾循环/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">pipeline-filter模式变体之尾循环</div>
    </a>
  
</nav>

  
</article>


  <section id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="post-谈ApacheOFbiz会员模块表结构设计" data-title="谈ApacheOFbiz会员模块表结构设计" data-url="http://vinoyang.com/2014/12/08/谈ApacheOFbiz会员模块表结构设计/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'vinoyang'};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
    <!-- 多说公共JS代码 end -->
  </section>
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Akka/">Akka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flink/">Flink</a><span class="tag-list-count">35</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/">RabbitMQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zookeeper/">Zookeeper</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/async/">async</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/disque/">disque</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flume/">flume</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/messagebus/">messagebus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/morphline/">morphline</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/quartz/">quartz</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rate-limit/">rate-limit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式/">分布式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式锁/">分布式锁</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日志系统/">日志系统</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/消息总线/">消息总线</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Akka/" style="font-size: 10px;">Akka</a> <a href="/tags/Flink/" style="font-size: 20px;">Flink</a> <a href="/tags/RabbitMQ/" style="font-size: 10px;">RabbitMQ</a> <a href="/tags/Zookeeper/" style="font-size: 12.5px;">Zookeeper</a> <a href="/tags/async/" style="font-size: 10px;">async</a> <a href="/tags/disque/" style="font-size: 10px;">disque</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/flume/" style="font-size: 15px;">flume</a> <a href="/tags/messagebus/" style="font-size: 10px;">messagebus</a> <a href="/tags/morphline/" style="font-size: 10px;">morphline</a> <a href="/tags/quartz/" style="font-size: 10px;">quartz</a> <a href="/tags/rate-limit/" style="font-size: 10px;">rate-limit</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/分布式/" style="font-size: 10px;">分布式</a> <a href="/tags/分布式锁/" style="font-size: 10px;">分布式锁</a> <a href="/tags/日志系统/" style="font-size: 17.5px;">日志系统</a> <a href="/tags/消息总线/" style="font-size: 15px;">消息总线</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">九月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">六月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">四月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">三月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">二月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">十二月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">十月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">九月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">七月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">五月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">三月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">二月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">一月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">十二月 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">十一月 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09/">九月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">八月 2012</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/06/">六月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/05/">五月 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04/">四月 2012</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">三月 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">二月 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">一月 2012</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">十二月 2011</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">十一月 2011</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">十月 2011</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09/">九月 2011</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/08/">八月 2011</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/07/">七月 2011</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/06/">六月 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/05/">五月 2011</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/03/">三月 2011</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/02/">二月 2011</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/07/">七月 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">六月 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/05/">五月 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04/">四月 2010</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03/">三月 2010</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/02/">二月 2010</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/01/">一月 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/10/">十月 2009</a><span class="archive-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/01/04/flink-runtime-consumer-input-gate/">Flink运行时之结果分区消费端</a>
          </li>
        
          <li>
            <a href="/2016/12/30/flink-runtime-producer-result-partition/">Flink运行时之生产端结果分区</a>
          </li>
        
          <li>
            <a href="/2016/12/28/flink-runtime-communicate-api/">Flink运行时之通信层API</a>
          </li>
        
          <li>
            <a href="/2016/12/20/flink-runtime-unified-data-exchange/">Flink运行时之统一的数据交换对象</a>
          </li>
        
          <li>
            <a href="/2016/12/14/flink-runtime-NetworkEnvironment/">Flink运行时之网络通信NetworkEnvironment分析</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Weibo show</h3>
    <div class="widget-weibo">
      <iframe width="100%" height="450" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=2&isTitle=0&noborder=0&isWeibo=1&isFans=0&uid=1958166695&verifier=9c2d28b9&colors=dddddd,dddddd,666666,0069a4,dddddd&dpc=1"></iframe>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Github</h3>
    <div class="widget-github">
      <script data-name="yanghua" src="http://octocard.in/o.js"></script>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 yanghua1127@gmail.com<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/projects" class="mobile-nav-link">Projects</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="http://apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>
<script type="text/javascript">
//<![CDATA[
if (typeof jQuery == 'undefined') {
  document.write(unescape("%3Cscript src='/js/jquery-2.0.3.min.js' type='text/javascript'%3E%3C/script%3E"));
}
// ]]>
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?36c1573c11e45ea0f6419af5f2f04760";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
  </div>
</body>
</html>